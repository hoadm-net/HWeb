@{
    ViewData["Title"] = "Dashboard Admin";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Dashboard Admin</h2>
    <span class="text-muted">Chào mừng bạn đến với trang quản trị</span>
</div>

<!-- Statistics Cards -->
<div class="row mb-4">
    <div class="col-xl-3 col-md-6">
        <div class="card bg-primary text-white mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="h4 mb-0">@ViewBag.TotalProducts</div>
                        <div>Tổng sản phẩm</div>
                    </div>
                    <div class="opacity-75">
                        <i class="fas fa-box fa-2x"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" asp-controller="Products" asp-action="Index">
                    Xem chi tiết
                </a>
                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6">
        <div class="card bg-success text-white mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="h4 mb-0">@ViewBag.ActiveProducts</div>
                        <div>Sản phẩm hoạt động</div>
                    </div>
                    <div class="opacity-75">
                        <i class="fas fa-check-circle fa-2x"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" asp-controller="Products" asp-action="Index">
                    Xem chi tiết
                </a>
                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6">
        <div class="card bg-warning text-white mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="h4 mb-0">@ViewBag.TotalCategories</div>
                        <div>Danh mục</div>
                    </div>
                    <div class="opacity-75">
                        <i class="fas fa-layer-group fa-2x"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" asp-controller="Categories" asp-action="Index">
                    Xem chi tiết
                </a>
                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6">
        <div class="card bg-info text-white mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="h4 mb-0">@ViewBag.TotalTags</div>
                        <div>Thẻ (Tags)</div>
                    </div>
                    <div class="opacity-75">
                        <i class="fas fa-tags fa-2x"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer d-flex align-items-center justify-content-between">
                <a class="small text-white stretched-link" asp-controller="Tags" asp-action="Index">
                    Xem chi tiết
                </a>
                <div class="small text-white"><i class="fas fa-angle-right"></i></div>
            </div>
        </div>
    </div>
</div>

<!-- Alerts -->
<div class="row mb-4">
    @if (ViewBag.OutOfStockProducts > 0)
    {
        <div class="col-md-6">
            <div class="alert alert-danger" role="alert">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>Cảnh báo!</strong> Có <strong>@ViewBag.OutOfStockProducts</strong> sản phẩm đã hết hàng.
                <a asp-controller="Products" asp-action="Index" class="alert-link">Xem ngay</a>
            </div>
        </div>
    }

    @if (ViewBag.LowStockProducts > 0)
    {
        <div class="col-md-6">
            <div class="alert alert-warning" role="alert">
                <i class="fas fa-exclamation-circle"></i>
                <strong>Chú ý!</strong> Có <strong>@ViewBag.LowStockProducts</strong> sản phẩm sắp hết hàng.
                <a asp-controller="Products" asp-action="Index" class="alert-link">Xem ngay</a>
            </div>
        </div>
    }
</div>

<!-- Recent Products -->
<div class="row">
    <div class="col-xl-6">
        <div class="card mb-4">
            <div class="card-header">
                <i class="fas fa-table me-1"></i>
                Sản phẩm mới nhất
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Tên sản phẩm</th>
                                <th>Danh mục</th>
                                <th>Giá</th>
                                <th>Tồn kho</th>
                                <th>Ngày tạo</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var product in ViewBag.RecentProducts)
                            {
                                <tr>
                                    <td>@product.Name</td>
                                    <td>@(product.Category?.Name ?? "Chưa phân loại")</td>
                                    <td>@product.Price.ToString("C")</td>
                                    <td>
                                        <span class="badge @(product.Stock > 0 ? "bg-success" : "bg-danger")">
                                            @product.Stock
                                        </span>
                                    </td>
                                    <td>@product.CreatedAt.ToString("dd/MM/yyyy")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer">
                <a asp-controller="Products" asp-action="Index" class="btn btn-primary btn-sm">
                    <i class="fas fa-eye"></i> Xem tất cả sản phẩm
                </a>
            </div>
        </div>
    </div>

    <div class="col-xl-6">
        <div class="card mb-4">
            <div class="card-header">
                <i class="fas fa-chart-area me-1"></i>
                Thống kê nhanh
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-6 mb-3">
                        <div class="border rounded p-3">
                            <h5 class="text-primary">@ViewBag.ActiveCategories/@ViewBag.TotalCategories</h5>
                            <small class="text-muted">Danh mục hoạt động</small>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="border rounded p-3">
                            <h5 class="text-success">@ViewBag.ActiveTags/@ViewBag.TotalTags</h5>
                            <small class="text-muted">Thẻ hoạt động</small>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="border rounded p-3">
                            <h5 class="text-warning">@ViewBag.LowStockProducts</h5>
                            <small class="text-muted">Sản phẩm sắp hết</small>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="border rounded p-3">
                            <h5 class="text-danger">@ViewBag.OutOfStockProducts</h5>
                            <small class="text-muted">Sản phẩm hết hàng</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-plus-circle me-1"></i>
                Thao tác nhanh
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-2">
                        <a asp-controller="Products" asp-action="Create" class="btn btn-primary w-100">
                            <i class="fas fa-plus"></i> Thêm sản phẩm
                        </a>
                    </div>
                    <div class="col-md-3 mb-2">
                        <a asp-controller="Categories" asp-action="Create" class="btn btn-success w-100">
                            <i class="fas fa-plus"></i> Thêm danh mục
                        </a>
                    </div>
                    <div class="col-md-3 mb-2">
                        <a asp-controller="Tags" asp-action="Create" class="btn btn-info w-100">
                            <i class="fas fa-plus"></i> Thêm thẻ
                        </a>
                    </div>
                    <div class="col-md-3 mb-2">
                        <a asp-controller="Products" asp-action="Index" class="btn btn-outline-primary w-100">
                            <i class="fas fa-list"></i> Danh sách sản phẩm
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
